package highway

import (
	"testing"
)

func TestHighway(t *testing.T) {

	input := make([]byte, 128)

	var tests = []uint64{
		0x187f602ff9bb9cb5, 0x8c338f61407b409a, 0x11bfc75139c9929c, 0x9b5069b072111007,
		0x35bde90f1caea415, 0xaf31923da5f3ee3d, 0xceb8e5d49debf22d, 0xf0309491922a2307,
		0xea8b2eeea00858ab, 0xa21bcc1710fb865c, 0x928a507714a8e5cd, 0xe5fb5f70a376537c,
		0x8b7ed3f860aa5743, 0xe156cf9c8cd7c25f, 0xc718918de991f97e, 0x7f442b11ef38f0c4,
		0x030455c7b3b50fde, 0x2a88dfa975df83e2, 0xf4dc63d2c206290c, 0xc46c0fa753f88c3f,
		0x89f82cffb4ac5cc2, 0xbbef34c64692120b, 0xf569f358efef24b2, 0x669fad26bc18cf31,
		0x483ffb5d473ea509, 0xdd8cae71d6eb829b, 0x34b647c36cb3c10d, 0x97f8af593af6de32,
		0x3147a8ba7fcdb983, 0x15cb5644834d2773, 0x8b4ced0f45d09dc4, 0xf7a18c2f6f2288cc,
		0x9e1ba5c77381212e, 0x4a975e217bcdfd7d, 0xfb4cbbce39a23660, 0xd0a14a8e36cd1cad,
		0xd14824c4b7e70753, 0xd91970e21523829a, 0x8b89b12a7ade9553, 0x57580bab43c28ab5,
		0x4c1452efc793ee58, 0x3ccb3ca87f4e6e8d, 0x2a8385452897497c, 0x113ab97c82463073,
		0x6e72534f46218d75, 0xcf3b66d55bc1c08b, 0x9ecdcbd66593a309, 0x1a95db6fff6112bc,
		0x66127c8bb4a49365, 0xf22b4924439f6efc, 0x5fd9091ac7d56c52, 0xfe0ea3c21c97f2c8,
		0x6b02af17be3c1de2, 0x50722d2006667459, 0x95179e3f6b031e72, 0x9cb446731618dd06,
		0x76dd2b09c61b02e3, 0xee457a4cf8313613, 0xbdbb98ee78e48762, 0x7415ce4c0a24ffdb,
		0x1a68a979cf437c92, 0x7b8a395fbfb3fe32, 0x1816881035353013, 0x0ebac6b28a2ef4c2,
		0x2d8511832490051e, 0x75ce22880e6b400a, 0x49e8da1e1ee59e49, 0x1228b8f12169a91c,
		0x432780ef6ee2254b, 0xbbec7eda1f2c9208, 0x360efd623a6fd421, 0xeda75577a8b6db54,
		0x404923d8067d8927, 0x25c03a8b0ac0cc09, 0x59d8c6f1ffa24a5c, 0xecf9d5538b09709c,
		0xca1c9bbf0e5bb967, 0x16c5789bf07eaac7, 0x3bb88dd63f434abb, 0xa682bd70f3c6ff99,
		0x365af03acc1a24f3, 0x8ec5d51655915716, 0x07cef5ecfe4e5733, 0xf5ded15be0a45c2d,
		0x4be3611f6fff1644, 0x545887a07f4279f9, 0xbe1ab6946e60bdb8, 0x588f057bcb7e6fe5,
		0xba4e57c417894485, 0x13b1708e56d16c4b, 0xb38538373f84ee13, 0x8a9f1379415e4205,
		0x992b61331e7ba16c, 0xcb3a634ff9f3b7b8, 0x242055e2cb3a7b0c, 0x795f7f1636e589d4,
		0xbab47a62d8cdd38c, 0x19c9046501b5dcc8, 0xb4bfa201e2966a8d, 0xed170c0eecbecfcd,
		0xdd04b97e58742eb2, 0x22c3944ede603ee3, 0x871cb984380dd11a, 0xf3b526d8c6f97dcd,
		0xb587a5bbf5a37364, 0xbeb97d31eaded3ab, 0x82f7905d185d7d5f, 0x7d8b0f090227ec31,
		0x2084809429333cca, 0xc94226ab0bef71dc, 0x413a27f59e9b56b7, 0xb64dc0803ddcfcf2,
		0xb01a0004be3456b2, 0xd9488ec8ba7b3d72, 0x2b55ceee4ba0b2da, 0xc18f16cfd0390dce,
		0xba357726d7bf0bb6, 0x9cdaa6f1bede068f, 0x6ba9d7021b64422d, 0x0b7890dda485d746,
		0xdc79da109f0a7cf5, 0x00ec6d82ca35d725, 0x35fb3999a007e195, 0x047e57dbd6c3f2ab,
		0x32a647fe98a6c46d, 0xfd9dfe51979ae030, 0xf9e2a02d2e6bc12b, 0x04167d6c83c94b1f,
	}

	key := Lanes{0x0706050403020100, 0x0F0E0D0C0B0A0908, 0x1716151413121110, 0x1F1E1D1C1B1A1918}

	for i := range input {
		input[i] = byte(i)

		if h := Hash(key, input[:i]); h != tests[i] {
			t.Errorf("Hash(..., input[:%d])=%016x, want %016x\n", i, h, tests[i])
		}
	}
}
